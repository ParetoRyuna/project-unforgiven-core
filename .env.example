# =========================
# Project Unforgiven - Env Template
# =========================
# Copy this file to `.env.local` for local dev, or to your deployment platform secrets.
# Never commit real secrets.

# -------------------------
# Frontend public config
# -------------------------
NEXT_PUBLIC_PROGRAM_ID=7cVF3X3PvNLTNHd9EqvWHsrtHkeJXwRzBcRuoHoTThVT
NEXT_PUBLIC_RECLAIM_APP_ID=
NEXT_PUBLIC_RECLAIM_PROVIDER_ID=
# Legacy frontend secret mode (not recommended in production):
NEXT_PUBLIC_RECLAIM_APP_SECRET=

# DEV ONLY: set to 1 only in controlled local testing.
NEXT_PUBLIC_ALLOW_INSECURE_RECLAIM=0

# -------------------------
# Oracle signing (production-critical)
# -------------------------
# Keep strict mode ON in production.
ORACLE_REQUIRE_STATIC_KEY=1

# Production guardrail:
# - With NODE_ENV=production, static key is required by default.
# - Only set to 1 for emergency debug in non-production.
ORACLE_ALLOW_EPHEMERAL_IN_PRODUCTION=0

# Option A (recommended for serverless/secret managers):
# Paste the full JSON array from your Solana keypair file (64-byte secret key).
# Example format only:
# ORACLE_PRIVATE_KEY="[12,34,56,...,78]"
ORACLE_PRIVATE_KEY=

# Option B (recommended for VM/container with mounted secret file):
# Absolute path to the same keypair JSON file.
ORACLE_KEYPAIR_PATH=

# -------------------------
# Reclaim verification hardening
# -------------------------
RECLAIM_REQUIRE_CONTEXT_MATCH=1
RECLAIM_ALLOWED_PROVIDERS=
ALLOW_INSECURE_DEV_PROOF=0

# -------------------------
# Replay & rate limiting
# -------------------------
# Use Redis in production for multi-instance consistency.
REDIS_URL=redis://127.0.0.1:6379
RECLAIM_REPLAY_PREFIX=reclaim:proof-id
RECLAIM_REPLAY_TTL_SECONDS=300

SHIELD_RATE_WINDOW_SECS=60
SHIELD_RATE_LIMIT_PER_IP=120
SHIELD_RATE_LIMIT_PER_WALLET=60

# If 1, API returns 503 when rate-limit backend is unavailable (fail-closed).
SHIELD_RATE_LIMIT_REQUIRE_REDIS=1

# Set to 1 only when behind your own trusted reverse proxy / load balancer.
SHIELD_TRUST_PROXY_HEADERS=0

# Emergency maintenance switch: 1 => /api/shield-score returns 503.
SHIELD_FREEZE=0

# -------------------------
# Optional runtime config
# -------------------------
SHIELD_API_BASE=http://127.0.0.1:3100
RPC_URL=http://127.0.0.1:8899

# -------------------------
# Fan Pass Hub graph + anchor
# -------------------------
# Graph persistence file (off-chain store)
HUB_GRAPH_STORE_PATH=/tmp/wanwan-fan-pass-graph.json

# Solana anchor mode:
# - 0 => on-chain (default, recommended)
# - 1 => mock mode (local debug only)
HUB_SOLANA_MOCK_MODE=0
HUB_SOLANA_RPC_URL=http://127.0.0.1:8899
HUB_ANCHOR_KEYPAIR_PATH=

# Daily anchor route auth token
HUB_DAILY_ANCHOR_TOKEN=

# -------------------------
# Key setup quick guide
# -------------------------
# 1) Generate keypair:
#    npm run oracle:keygen:v2
# 2) Use file mode:
#    ORACLE_KEYPAIR_PATH="/absolute/path/to/oracle-v2.json"
# 3) Or inline mode:
#    ORACLE_PRIVATE_KEY="$(cat /absolute/path/to/oracle-v2.json)"
# 4) Keep ORACLE_REQUIRE_STATIC_KEY=1 in production.
